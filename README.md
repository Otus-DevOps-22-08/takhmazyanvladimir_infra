# takhmazyanvladimir_infra
takhmazyanvladimir Infra repository

Для прямого подключения с локальной тачки к someinternalhost прописываем в /home/azathoth/.ssh/config определённые настройки (выложил файл config в папку cloud-bastion).
И далее подключаемся командой ssh someinternalhost

pritunl настроен, vpn работает

bastion_IP = 51.250.83.187
someinternalhost_IP = 10.128.0.9

Задание с установкой SSL-сертификата выполнено с использованием letsencrypt и nip.io, при входе по ссылке 
https://51.250.83.187.nip.io/ подключение считается безопасным.

testapp_IP = 84.201.131.118
testapp_port = 9292

Задание №8

Созданы статические inventory-файлы в форматах ini, yaml и json.
Создан плейбук для клонирования репозитория.

Теперь выполните ansible app -m command -a 'rm -rf ~/reddit'
и проверьте еще раз выполнение плейбука. Что изменилось и почему?
Ответ: В результате выполнения плейбука изменилось changed=0 на changed=1, поскольку перед первым запуском репозиторий уже был клонирован, и внесение изменений не потребовалось. После удаления клонирование выполнилось ещё раз.

Создан скрипт inventory.sh для динамического получения адресов виртуальных машин. 
Формат json-файла отличается для статического и динамического inventory, hosts заполняется по-разному.
Для статического:
{"app":{"hosts":{"appserver":{"ansible_host":"158.160.39.34"}}},"db":{"hosts":{"dbserver":{"ansible_host":"158.160.40.190"}}}}
Для динамического:
{"app":{"hosts":["158.160.39.34"]},"db":{"hosts":["158.160.40.190"]}}
